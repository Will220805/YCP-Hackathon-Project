<!DOCTYPE html>
<html>
<head>
	<title>Relationship Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Reference a link to a CDN for Axios here -->
	<!-- <script src="https://unpkg.com/axios/dist/axios.min.js"></script> -->
</head>
<body>
    <script>
        // function setScenePrompt() {
        //     const changeText = document.querySelector("#prompt");
        //     changeText.textContent = startGame;
        // }
        function startGame() {
            Promise.race([
                fetch("http://127.0.0.1:8052/start_game", {
                    method: "POST",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                }),
                new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), 10000))
            ])
            .then(response => response.json())
            .then(jsonData => {
                console.log(jsonData)
                const changeText = document.querySelector("#prompt");
                changeText.textContent = jsonData;
            }); 
            
        }
        function setScenePrompt() {
            Promise.race([
                fetch("http://127.0.0.1:8052/scene1", {
                    method: "POST",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                }),
                new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), 10000))
            ])
            .then(response => response.json())
            .then(jsonData => {
                console.log(jsonData)
                const changeText = document.querySelector("#prompt");
                changeText.textContent = jsonData.prompt.toString();
                for (c = -1; c <2; c++) {
                    console.log(jsonData.choice[c])
                    console.log("#button" + (c+2))
                    const changeButton = document.querySelector("#button" + (c+2)+"");
                    changeButton.innerHTML = jsonData.choice[c];
                    document.getElementById("button" + (c+2)+"").value = -1
                }
                
            }
            );
        }
        

    </script>
    <style> 
    h2 {
        font-size: 32px;
        font-weight: bold;
        text-align: center;
    }
    p {
        font-size: 25px;
        font-weight: normal;
        text-align: center;
    }

    body {
        margin: auto;
        width: 640px; 
        padding: 50px;
        font-family: 'Lexend Deca', sans-serif; 
        color: #2E475D;    
}
    button {
        font-size: 18px;
        font-family: 'Times New Roman', Times, serif;
    }
    </style>
    <div>
        <h2>Scenario 1</h2>
        <br>
        <button id = change_text onclick="setScenePrompt()"> Change Scene Text (Test)</button>
        <br>

        <br>
        <p1 id = prompt></p1>
        <br>

        <br>
        <button id = button1 value = "option1" onclick='setButtonPrompt()'> Option 1</button>
        <button id = button2 value = "option2" onclick="setButtonPrompt()"> Option 2</button>
        <button id = button3 value = "option3" onclick="setButtonPrompt()"> Option 3</button>
        <br>
        <br>
        <br>
        